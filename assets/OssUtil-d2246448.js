import{_ as l,__tla as p}from"./request-1f057831.js";import{O as A}from"./ali-oss-3fdf9ab6.js";let u,y,m=Promise.all([(()=>{try{return p}catch{}})()]).then(async()=>{function d(t){let e,a,s,c,o="";for(e=0;e<t.length;e++)if(t.charAt(e)==="%"){if(a=parseInt(t.charAt(++e)+t.charAt(++e),16),!a)break;a&128?a&32?(e++,s=parseInt(t.charAt(++e)+t.charAt(++e),16),e++,c=parseInt(t.charAt(++e)+t.charAt(++e),16),a=(a&15)<<12,s=(s&63)<<6,c=c&63,a=a+s+c):(e++,s=parseInt(t.charAt(++e)+t.charAt(++e),16),a=(a&31)<<6,s=s&63,a=a+s):a=a,o+=String.fromCharCode(a)}else o+=t.charAt(e);return o}let i,h,r,n;i={"x-oss-storage-class":"Standard","x-oss-object-acl":"public-read","x-oss-forbid-overwrite":"true"},h=()=>{function t(){return((1+Math.random())*65536|0).toString(16).substring(1)}return`${+new Date}_${t()}${t()}`},r=await l.get("https://sts.wangminan.me/oss"),n=new A({endpoint:"oss-cn-hongkong.aliyuncs.com",accessKeyId:r.data.AccessKeyId,accessKeySecret:r.data.AccessKeySecret,stsToken:r.data.SecurityToken,bucket:"wangminan-files",useFetch:!0,secure:!0,refreshSTSToken:async()=>{const t=await l.get("https://sts.wangminan.me/oss");return{accessKeyId:t.AccessKeyId,accessKeySecret:t.AccessKeySecret,stsToken:t.SecurityToken}}}),y=async(t,e)=>{try{return await n.put("police/"+t+"_"+h()+"."+e.name.split(".")[1],e,{headers:i})}catch(a){throw a}},u=async t=>{try{return await n.delete(d("police/"+t))}catch(e){throw e}}});export{m as __tla,u as d,y as p};
