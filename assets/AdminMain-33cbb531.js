import{u as la}from"./vuex-857a7739.js";import{u as ra}from"./vue-router-111722e5.js";import{_ as V,__tla as sa}from"./request-cee48b27.js";import{i as na}from"./echarts-dc442d78.js";import{s as oa}from"./@vueuse-dbe79a15.js";import{_ as ia,__tla as da}from"./_plugin-vue_export-helper-46758fc1.js";import{b as ua,E as _,__tla as ca}from"./element-plus-e3bcbdc2.js";import{r as k,w as pa,j as ma,ag as l,o,c as m,X as a,R as e,F as X,a as t,V as g,W as i,Q as q,a6 as _a,U as fa,ax as ya,ay as ga}from"./@vue-3b858b78.js";import"./axios-bff3f665.js";import"./js-cookie-cf83ad76.js";import"./nprogress-60a86a5b.js";import"./ali-oss-f05aeb17.js";import"./tslib-54e39b60.js";import"./zrender-35d94477.js";import"./lodash-es-3b111273.js";import"./@element-plus-ffae287f.js";import"./@popperjs-c45de710.js";import"./@ctrl-43a4208a.js";import"./dayjs-de8721ee.js";import"./async-validator-7f96df71.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";import{__tla as va}from"./@floating-ui-dec9075e.js";let D,ha=Promise.all([(()=>{try{return sa}catch{}})(),(()=>{try{return da}catch{}})(),(()=>{try{return ca}catch{}})(),(()=>{try{return va}catch{}})()]).then(async()=>{let s,w,x,C,b,T,W,A,L,N,B,E,F,H,I,M,P,S,j,z,O;s=f=>(ya("data-v-ea3f4473"),f=f(),ga(),f),w={class:"card-header"},x=s(()=>t("span",null,"\u4ECA\u65E5\u8BBF\u95EE",-1)),C={class:"card-header"},b=s(()=>t("span",null,"\u4ECA\u65E5\u6A21\u62DF",-1)),T={class:"card-header"},W=s(()=>t("span",null,"\u672C\u5468\u6A21\u62DF",-1)),A={class:"card-header"},L=s(()=>t("span",null,"\u5386\u53F2\u6D41\u91CF",-1)),N={class:"card-header"},B=s(()=>t("span",null,"\u4E0A\u5468\u8BBF\u95EE\u6D41\u91CF",-1)),E={key:1,class:"graphBox"},F=s(()=>t("div",{id:"line",style:{width:"500px",height:"300px"}},null,-1)),H=[F],I={class:"card-header"},M=s(()=>t("span",null,"\u8B66\u5458\u6A21\u62DF\u52A8\u6001",-1)),P={key:1},S=s(()=>t("span",null,"\u5B8C\u6210\u4E86",-1)),j={style:{"text-align":"start","font-size":"10px","margin-left":"6%",color:"gray"}},z={key:0},O={__name:"AdminMain",setup(f){const G=la();ra();const d=k({accessCount:0,trainingCount:0,weeklyTrainingCount:0,flow:0,accessLastWeek:[]}),v=k([]),J=async()=>{try{const{data:r}=await V.get("/backstage-management-service/admin/stats");r.code!==2e3?_.error("\u8BF7\u6C42\u6570\u636E\u5931\u8D25"):d.value=r.data}catch{_.error("\u8BF7\u6C42\u8BBF\u95EE\u6570\u636E\u5931\u8D25")}},K=async()=>{try{const{data:r}=await V.get("/backstage-management-service/admin/mainPage/dynamic");r.code!==2e3?_.error("\u8BF7\u6C42\u6570\u636E\u5931\u8D25"):v.value=r.data}catch{_.error("\u8BF7\u6C42\u6A21\u578B\u4F7F\u7528\u6570\u636E\u5931\u8D25")}};let y=k();const Q=oa("vueuse-color-scheme","auto"),R=()=>{let r={backgroundColor:"",xAxis:{type:"category",data:["\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94","\u5468\u516D","\u5468\u65E5"]},yAxis:{type:"value"},tooltip:{trigger:"item"},series:[{data:d.value.accessLastWeek,type:"line"}]};y=na(document.getElementById("line"),Q.value==="dark"?"dark":"light"),y.setOption(r)};return pa(Q,()=>{y&&y.dispose(),R()}),ma(async()=>{const r=ua.service({lock:!0,text:"\u6B63\u5728\u52A0\u8F7D\u9996\u9875\u6570\u636E",background:"rgba(0, 0, 0, 0.7)"});try{G.commit("saveNavState",""),await J(),await K(),R()}catch{_.error("\u8BF7\u6C42\u9996\u9875\u6570\u636E\u5931\u8D25")}finally{r.close()}}),(r,ka)=>{const Y=l("House"),u=l("el-icon"),c=l("el-card"),n=l("el-col"),Z=l("Clock"),$=l("Soccer"),aa=l("Calendar"),h=l("el-row"),ea=l("ChromeFilled"),U=l("el-empty"),ta=l("Menu");return o(),m(X,null,[a(h,{gutter:15},{default:e(()=>[a(n,{span:6},{default:e(()=>[a(c,null,{header:e(()=>[t("div",w,[a(u,null,{default:e(()=>[a(Y)]),_:1}),x])]),default:e(()=>[g(" "+i(d.value.accessCount),1)]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(c,null,{header:e(()=>[t("div",C,[a(u,null,{default:e(()=>[a(Z)]),_:1}),b])]),default:e(()=>[g(" "+i(d.value.trainingCount),1)]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(c,null,{header:e(()=>[t("div",T,[a(u,null,{default:e(()=>[a($)]),_:1}),W])]),default:e(()=>[g(" "+i(d.value.weeklyTrainingCount),1)]),_:1})]),_:1}),a(n,{span:6},{default:e(()=>[a(c,null,{header:e(()=>[t("div",A,[a(u,null,{default:e(()=>[a(aa)]),_:1}),L])]),default:e(()=>[g(" "+i(d.value.flow),1)]),_:1})]),_:1})]),_:1}),a(h,{gutter:15,style:{"margin-top":"2%"}},{default:e(()=>[a(n,{span:12},{default:e(()=>[a(c,{class:"graphCard"},{header:e(()=>[t("div",N,[a(u,null,{default:e(()=>[a(ea)]),_:1}),B])]),default:e(()=>[d.value.accessLastWeek.length===0?(o(),q(U,{key:0,description:"\u6682\u65E0\u6570\u636E"})):(o(),m("div",E,H))]),_:1})]),_:1}),a(n,{span:12},{default:e(()=>[a(c,null,{header:e(()=>[t("div",I,[a(u,null,{default:e(()=>[a(ta)]),_:1}),M])]),default:e(()=>[v.value.length===0?(o(),q(U,{key:0,description:"\u6682\u65E0\u6570\u636E"})):(o(),m("ul",P,[(o(!0),m(X,null,_a(v.value,p=>(o(),m("li",{key:p.id},[a(h,{gutter:20},{default:e(()=>[a(n,{span:6},{default:e(()=>[t("span",null,"\u8B66\u5458:"+i(p.policeName),1)]),_:2},1024),a(n,{span:4},{default:e(()=>[S]),_:1}),a(n,{span:14},{default:e(()=>[t("span",null,'"'+i(p.modelName)+'"\u573A\u666F\u7684\u6A21\u62DF',1)]),_:2},1024)]),_:2},1024),t("div",j,[t("div",null,"\u5F00\u59CB\u65F6\u95F4:"+i(p.startTime),1),p.endTime?(o(),m("div",z,"\u7ED3\u675F\u65F6\u95F4:"+i(p.endTime),1)):fa("",!0)])]))),128))]))]),_:1})]),_:1})]),_:1})],64)}}},D=ia(O,[["__scopeId","data-v-ea3f4473"]])});export{ha as __tla,D as default};
